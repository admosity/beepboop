include ../partials/sidebar.jade

div.dashboard-wrapper
  include ../partials/dashboard-header.jade
  div.dashboard-content
    div.device-form
      div.device-inner
        h1 edit {{device.name}}
        form(ng-submit="updateDevice($event)")
          label device name
          input(type="text" placeholder="Bathroom Sensor" ng-model="device.name")
          label device key
          input(type="text" placeholder="Device Key" disabled ng-model="device._id")
          label endpoint URL
          input(type="text" placeholder="Endpoint URL" disabled ng-model="device.endpointUrl")
          
          textarea(placeholder="Default Template" ng-model="device.template")
          div.api
            h2 APIs
            br
            p.info connect APIs with your device
            br
            div.column-10
              select(name="" ng-model="api")
                option(value="") Custom API
                option(value="twilio") Twilio
                option(value="twitter") Twitter
            div.column-1
              a(href="" class="add-filter lrg" ng-click="addNewApi(api)") 
                i.fa.fa-plus-circle

            div(ng-repeat="a in device.API" ng-switch="a.name")
              div.column-10(ng-switch-when="twilio")
                label SID
                input(type="text" placeholder="SID" ng-model="a.creds.sid")
                label Auth token
                input(type="text" placeholder="Auth token" ng-model="a.creds.authToken")
                label phone number from
                input(type="tel" placeholder="Send Text From" ng-model="a.details.from")
                label phone number to
                input(type="tel" placeholder="Send Text To" ng-model="a.details.to")
                label message
                textarea(placeholder="Message" ng-model="a.details.body")
              div.column-10(ng-switch-when="twitter")
                label message
                textarea(placeholder="Tweet Message" ng-model="a.details.message")
              div.column-1(ng-if="device.API.length")
                a(href="" class="add-filter lrg" ng-click="removeApi($index)") 
                  i.fa.fa-minus-circle

            
            br
            div.api-item
              h2 custom api
                a(href="")
                  i.fa.fa-minus-circle
              label callback URL
              input(type="text" placeholder="Callback URL")
            div.api-item
              h2 twitter
                a(href="")
                  i.fa.fa-minus-circle
              label api key
              input(type="text" placeholder="918237192837129873")
            br
          div.filters
            h2 filters
              a(href="" class="add-filter") 
                i.fa.fa-plus-circle
            br
            p.info create conditions for your widget to function. example: if LIGHT = ON
            div.filter-item
              h2 filter 1
                a(href="")
                  i.fa.fa-minus-circle
              div.column-4
                label variable
                input(type="text" placeholder="Var")
              div.column-4
                label operator
                select(name="")
                  option >
                  option <
                  option >=
                  option <=
                  option =
              div.column-4
                label variable
                input(type="text" placeholder="Var")
          //- label.center
          //-   input(type="checkbox" checked) 
          //-   | &nbsp; sell this widget
          //- label.clear Venmo Username
          //- input(type="text" placeholder="Venmo Username")
          //- 
          //- p.info Please enter your Venmo username in order to accept payments on the BeepBoop Marketplace.
          input(type="submit" class="btn btn-purple" value="Save")
          
          p.info Removing this device will delete any widgets created within it.
          a(href="#" class="btn block btn-small btn-remove") Remove Device
